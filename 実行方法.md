# 🚀 CSVインポート実行方法

## ✅ 最も簡単な方法

ターミナルで以下のコマンドを順番に実行してください：

```bash
# 1. プロジェクトディレクトリに移動
cd /Users/a2025-057/Downloads/office-de-yasai-matcher

# 2. 接続文字列を設定
export DATABASE_URL="postgresql://postgres:ody831match@db.krbkafougmvtkitsqxvt.supabase.co:5432/postgres"

# 3. CSVをインポート
npx tsx import-csv-to-supabase.ts
```

これで完了です！

---

## 📝 実行結果の確認

実行が成功すると、以下のようなメッセージが表示されます：

```
🚀 CSVインポートを開始します...

✅ データベース接続成功

📄 CSVファイルを読み込んでいます...
✅ 1228件のデータを読み込みました

🗑️  既存のデータをクリアしています...
✅ クリア完了

📤 データをインポートしています...

  📊 進捗: 50/1228件 (4.1%)
  📊 進捗: 100/1228件 (8.1%)
  ...

==================================================
✅ インポート完了！
   成功: 1228件
   所要時間: 15.3秒
==================================================
```

---

## ❌ エラーが出た場合

### 「command not found: npx」と表示される場合

Node.jsがインストールされていない可能性があります。

**解決方法**:
1. [Node.jsの公式サイト](https://nodejs.org/)からインストール
2. または、Homebrewを使用：
   ```bash
   brew install node
   ```

### 「DATABASE_URLが設定されていません」と表示される場合

環境変数が設定されていません。ステップ2を再度実行してください。

### 「データベースに接続できませんでした」と表示される場合

1. 接続文字列のパスワードが正しいか確認
2. Supabaseのプロジェクトがアクティブか確認

### 「relation "cases" does not exist」と表示される場合

Supabaseでテーブルを作成していません。以下の手順で作成してください：

1. Supabaseダッシュボード → **SQL Editor**
2. 以下のSQLをコピー＆ペースト：

```sql
CREATE TABLE IF NOT EXISTS cases (
  id SERIAL PRIMARY KEY,
  "companyName" VARCHAR(255) NOT NULL,
  url TEXT,
  industry VARCHAR(100),
  "employeeCount" INTEGER,
  challenges TEXT,
  reasons TEXT,
  effects TEXT,
  "fullText" TEXT,
  "usageScale" VARCHAR(50),
  "createdAt" TIMESTAMP DEFAULT NOW() NOT NULL
);
```

3. **Run** ボタンをクリック
4. 再度インポートを実行

---

## 💡 ヒント

- ターミナルを閉じると環境変数が消えます。毎回設定が必要です
- インポートには1-2分かかる場合があります
- エラーが出ても、一部のデータはインポートされている可能性があります。SupabaseのTable Editorで確認してください

